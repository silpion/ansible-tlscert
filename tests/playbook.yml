---
- hosts: all
  vars:
    tlscert_create:
      - foo.example.com
      - CN: bar.example.com
        C: US
        ST: Michigan
    tlscert_install:
      - example.com
      - name: example.com
  pre_tasks:
    - name: Create facts.d folder
      tags: tls_certificates
      become: true
      file:
        state: directory
        path: '/etc/ansible/facts.d'
  roles:
    - role: ansible-tlscert
      tlscert_certificates_create: []
    - role: ansible-tlscert

- hosts: all
  tasks:
    - name: Display ansible_local.tls_certificates
      tags: tls_certificates
      debug: msg="{{ ansible_local.tls_certificates }}"
    - name: Display tlscert_changed
      tags: tls_certificates
      debug: var=tlscert_changed
